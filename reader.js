var fs = require('fs');var mysql  = require('mysql');var mysqlUtilities = require('mysql-utilities');var saver = require('./saver.js');function start(configfile) {	var con_mysql = mysql.createConnection({		host:     'localhost',		user:     'root',		password: '123',		database: 'accept_group'	});	fs.readFile(configfile, 'utf8', function(err, contents) {			if (err)			throw err;		con_mysql.connect();		readUsers(con_mysql, function(){			con_mysql.end();		});	});}function readUsers(con_mysql, fu_end) {		con_mysql.query('SELECT `id`, `username`, `fullname`, `email`, `active` FROM `sn_user`', [], function(err, result) {				if (err)			throw err;		console.log();		console.log(' (i) Read users is ok. Count users: ' + result.length);		saver.insertUsers(result, function(){			readTypes(con_mysql, fu_end);		});			});}function readTypes(con_mysql, fu_end) {	con_mysql.query('SELECT `id`, `value` FROM `sn_type_org`', [], function(err, result) {				if (err)			throw err;				console.log();		console.log(' (i) Read types is ok. Count types: ' + result.length);		saver.insertTypes(result, function(){			readClients(con_mysql, fu_end);		});	});}function readClients(con_mysql, fu_end){	con_mysql.query('SELECT `id`, `id_typeorg`, `org`, `id_region`, `comment`, `manager`, `mark`, `site`, `inn`, `city`, 0 AS `region` FROM `sn_client` LIMIT 1000', [], function(err, result) {				if (err)			throw err;		console.log();		console.log(' (i) Read clients is ok. Count clients: ' + result.length);		saver.insertClients(result, function(){			readContacts(con_mysql, fu_end);		});			});}function readContacts(con_mysql, fu_end){	con_mysql.query('SELECT `id`, `id_client`, `name`, `email`, `phone` FROM `sn_contact` LIMIT 1000', [], function(err, result) {			if (err)			throw err;		console.log();		console.log(' (i) Read contacts is ok. Count contacts: ' + result.length);		saver.insertContacts(result, function(){			readTasks(con_mysql, fu_end);		});			});}function readTasks(con_mysql, fu_end){	con_mysql.query('SELECT `date`, `type`, `text`, `status`, `user`, `id_client` FROM `sn_task`', [], function(err, result) {		if (err)			throw err;		console.log();		console.log(' (i) Read tasks is ok. Count tasks: ' + result.length);		saver.insertTasks(result, function(){			fu_end();		});	});}exports.start = start;